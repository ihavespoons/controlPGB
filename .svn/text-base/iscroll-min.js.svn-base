(function(){function l(p,n){var q=this;q.element=typeof p=="object"?p:document.getElementById(p);q.wrapper=q.element.parentNode;q.element.style.webkitTransitionProperty="-webkit-transform";q.element.style.webkitTransitionTimingFunction="cubic-bezier(0,0,0.25,1)";q.element.style.webkitTransitionDuration="0";q.element.style.webkitTransform=j+"0,0"+b;q.options={bounce:f,momentum:f,checkDOMChanges:true,topOnDOMChanges:false,hScrollbar:f,vScrollbar:f,fadeScrollbar:c||d||!a,shrinkScrollbar:c||d,desktopCompatibility:false,overflow:"auto"};if(typeof n=="object"){for(var o in n){q.options[o]=n[o]}}if(q.options.desktopCompatibility){q.options.overflow="hidden"}q.wrapper.style.overflow=q.options.overflow;q.refresh();window.addEventListener("onorientationchange" in window?"orientationchange":"resize",q,false);if(a||q.options.desktopCompatibility){q.element.addEventListener(h,q,false);q.element.addEventListener(k,q,false);q.element.addEventListener(g,q,false)}if(q.options.checkDOMChanges){q.element.addEventListener("DOMSubtreeModified",q,false)}if(!a){q.element.addEventListener("click",q,true)}}l.prototype={x:0,y:0,dist:0,handleEvent:function(o){var n=this;switch(o.type){case"click":if(!o._fake){o.stopPropagation()}break;case h:n.touchStart(o);break;case k:n.touchMove(o);break;case g:n.touchEnd(o);break;case"webkitTransitionEnd":n.transitionEnd(o);break;case"orientationchange":case"resize":n.refresh();break;case"DOMSubtreeModified":n.onDOMModified(o);break}},onDOMModified:function(o){var n=this;n.refresh();if(n.options.topOnDOMChanges&&(n.x!=0||n.y!=0)){n.scrollTo(0,0,"0")}},refresh:function(){var n=this,p=this.x,o=this.y;n.scrollWidth=n.wrapper.clientWidth;n.scrollHeight=n.wrapper.clientHeight;n.scrollerWidth=n.element.offsetWidth;n.scrollerHeight=n.element.offsetHeight;n.maxScrollX=n.scrollWidth-n.scrollerWidth;n.maxScrollY=n.scrollHeight-n.scrollerHeight;if(n.scrollX){if(n.maxScrollX>=0){p=0}else{if(n.x<n.maxScrollX){p=n.maxScrollX}}}if(n.scrollY){if(n.maxScrollY>=0){o=0}else{if(n.y<n.maxScrollY){o=n.maxScrollY}}}if(p!=n.x||o!=n.y){n.setTransitionTime("0");n.setPosition(p,o,true)}n.scrollX=n.scrollerWidth>n.scrollWidth;n.scrollY=!n.scrollX||n.scrollerHeight>n.scrollHeight;if(n.options.hScrollbar&&n.scrollX){n.scrollBarX=n.scrollBarX||new m("horizontal",n.wrapper,n.options.fadeScrollbar,n.options.shrinkScrollbar);n.scrollBarX.init(n.scrollWidth,n.scrollerWidth)}else{if(n.scrollBarX){n.scrollBarX=n.scrollBarX.remove()}}if(n.options.vScrollbar&&n.scrollY&&n.scrollerHeight>n.scrollHeight){n.scrollBarY=n.scrollBarY||new m("vertical",n.wrapper,n.options.fadeScrollbar,n.options.shrinkScrollbar);n.scrollBarY.init(n.scrollHeight,n.scrollerHeight)}else{if(n.scrollBarY){n.scrollBarY=n.scrollBarY.remove()}}},setPosition:function(n,q,p){var o=this;o.x=n;o.y=q;o.element.style.webkitTransform=j+o.x+"px,"+o.y+"px"+b;if(!p){if(o.scrollBarX){o.scrollBarX.setPosition(o.x)}if(o.scrollBarY){o.scrollBarY.setPosition(o.y)}}},setTransitionTime:function(o){var n=this;o=o||"0";n.element.style.webkitTransitionDuration=o;if(n.scrollBarX){n.scrollBarX.bar.style.webkitTransitionDuration=o;n.scrollBarX.wrapper.style.webkitTransitionDuration=f&&n.options.fadeScrollbar?"300ms":"0"}if(n.scrollBarY){n.scrollBarY.bar.style.webkitTransitionDuration=o;n.scrollBarY.wrapper.style.webkitTransitionDuration=f&&n.options.fadeScrollbar?"300ms":"0"}},touchStart:function(p){var o=this,n;o.scrolling=true;p.preventDefault();p.stopPropagation();o.moved=false;o.dist=0;o.setTransitionTime("0");if(o.options.momentum){n=new WebKitCSSMatrix(window.getComputedStyle(o.element).webkitTransform);if(n.e!=o.x||n.f!=o.y){o.element.removeEventListener("webkitTransitionEnd",o,false);o.setPosition(n.e,n.f);o.moved=true}}o.touchStartX=a?p.changedTouches[0].pageX:p.pageX;o.scrollStartX=o.x;o.touchStartY=a?p.changedTouches[0].pageY:p.pageY;o.scrollStartY=o.y;o.scrollStartTime=p.timeStamp},touchMove:function(t){var r=this,q=a?t.changedTouches[0].pageX:t.pageX,p=a?t.changedTouches[0].pageY:t.pageY,o=r.scrollX?q-r.touchStartX:0,n=r.scrollY?p-r.touchStartY:0,u=r.x+o,s=r.y+n;if(!r.scrolling){return}r.dist+=Math.abs(r.touchStartX-q)+Math.abs(r.touchStartY-p);r.touchStartX=q;r.touchStartY=p;if(u>0||u<r.maxScrollX){u=r.options.bounce?Math.round(r.x+o/3):u>=0?0:r.maxScrollX}if(s>0||s<r.maxScrollY){s=r.options.bounce?Math.round(r.y+n/3):s>=0?0:r.maxScrollY}if(r.dist>5){r.setPosition(u,s);r.moved=true}},touchEnd:function(u){var t=this,q=u.timeStamp-t.scrollStartTime,v,w,o,n,p,s,r;if(!t.scrolling){return}t.scrolling=false;if(!t.moved){t.resetPosition();v=a?u.changedTouches[0].target:u.target;while(v.nodeType!=1){v=v.parentNode}w=document.createEvent("Event");w.initEvent("focus",true,true);v.dispatchEvent(w);w=document.createEvent("MouseEvents");w.initMouseEvent("click",true,true,u.view,1,v.screenX,v.screenY,v.clientX,v.clientY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,0,null);w._fake=true;v.dispatchEvent(w);return}if(!t.options.momentum||q>250){t.resetPosition();return}o=t.scrollX===true?t.momentum(t.x-t.scrollStartX,q,t.options.bounce?-t.x+t.scrollWidth/5:-t.x,t.options.bounce?t.x+t.scrollerWidth-t.scrollWidth+t.scrollWidth/5:t.x+t.scrollerWidth-t.scrollWidth):{dist:0,time:0};n=t.scrollY===true?t.momentum(t.y-t.scrollStartY,q,t.options.bounce?-t.y+t.scrollHeight/5:-t.y,t.options.bounce?(t.maxScrollY<0?t.y+t.scrollerHeight-t.scrollHeight:0)+t.scrollHeight/5:t.y+t.scrollerHeight-t.scrollHeight):{dist:0,time:0};if(!o.dist&&!n.dist){t.resetPosition();return}p=Math.max(Math.max(o.time,n.time),1);s=t.x+o.dist;r=t.y+n.dist;t.scrollTo(s,r,p+"ms")},transitionEnd:function(){this.element.removeEventListener("webkitTransitionEnd",this,false);this.resetPosition()},resetPosition:function(p){var n=this,q=n.x,o=n.y,n=n,p=p||"500ms";if(n.x>=0){q=0}else{if(n.x<n.maxScrollX){q=n.maxScrollX}}if(n.y>=0||n.maxScrollY>0){o=0}else{if(n.y<n.maxScrollY){o=n.maxScrollY}}if(q!=n.x||o!=n.y){n.scrollTo(q,o,p)}else{if(n.scrollBarX||n.scrollBarY){if(n.scrollBarX){n.scrollBarX.hide()}if(n.scrollBarY){n.scrollBarY.hide()}}}},scrollTo:function(o,n,q){var p=this;p.setTransitionTime(q||"450ms");p.setPosition(o,n);if(q==="0"||q=="0s"||q=="0ms"){p.resetPosition()}else{p.element.addEventListener("webkitTransitionEnd",p,false)}},scrollToElement:function(o,q){o=typeof o=="object"?o:this.element.querySelector(o);if(!o){return}var p=this,n=p.scrollX?-o.offsetLeft:0,r=p.scrollY?-o.offsetTop:0;if(n>=0){n=0}else{if(n<p.maxScrollX){n=p.maxScrollX}}if(r>=0){r=0}else{if(r<p.maxScrollY){r=p.maxScrollY}}p.scrollTo(n,r,q)},momentum:function(u,o,s,n){var r=2.5,t=1.2,p=Math.abs(u)/o*1000,q=p*p/r/1000,v=0;if(u>0&&q>s){p=p*s/q/r;q=s}else{if(u<0&&q>n){p=p*n/q/r;q=n}}q=q*(u<0?-1:1);v=p/t;return{dist:Math.round(q),time:Math.round(v)}},destroy:function(n){var o=this;window.removeEventListener("orientationchange",o,false);window.removeEventListener("resize",o,false);o.element.removeEventListener(h,o,false);o.element.removeEventListener(k,o,false);o.element.removeEventListener(g,o,false);o.element.removeEventListener("DOMSubtreeModified",o,false);o.element.removeEventListener("click",o,true);o.element.removeEventListener("webkitTransitionEnd",o,false);if(o.scrollBarX){o.scrollBarX=o.scrollBarX.remove()}if(o.scrollBarY){o.scrollBarY=o.scrollBarY.remove()}if(n){o.wrapper.parentNode.removeChild(o.wrapper)}return null}};var m=function(o,u,t,q){var s=this;s.dir=o;s.fade=t;s.shrink=q;s.uid=++e;s.bar=document.createElement("div");var r="position:absolute;top:0;left:0;-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);pointer-events:none;-webkit-transition-duration:0;-webkit-transition-delay:0;-webkit-transition-property:-webkit-transform;z-index:10;background:rgba(0,0,0,0.5);-webkit-transform:"+j+"0,0"+b+";"+(o=="horizontal"?"-webkit-border-radius:3px 2px;min-width:6px;min-height:5px":"-webkit-border-radius:2px 3px;min-width:5px;min-height:6px"),p,n;s.bar.setAttribute("style",r);s.wrapper=document.createElement("div");r="-webkit-mask:-webkit-canvas(scrollbar"+s.uid+s.dir+");position:absolute;z-index:10;pointer-events:none;overflow:hidden;opacity:0;-webkit-transition-duration:"+(t?"300ms":"0")+";-webkit-transition-delay:0;-webkit-transition-property:opacity;"+(s.dir=="horizontal"?"bottom:2px;left:1px;right:7px;height:5px":"top:1px;right:2px;bottom:7px;width:5px;");s.wrapper.setAttribute("style",r);s.wrapper.appendChild(s.bar);u.appendChild(s.wrapper)};m.prototype={init:function(n,q){var r=this,o,p;if(r.dir=="horizontal"){p=r.wrapper.offsetWidth;o=document.getCSSCanvasContext("2d","scrollbar"+r.uid+r.dir,p,5);o.fillStyle="rgb(0,0,0)";o.beginPath();o.arc(2.5,2.5,2.5,Math.PI/2,-Math.PI/2,false);o.lineTo(p-2.5,0);o.arc(p-2.5,2.5,2.5,-Math.PI/2,Math.PI/2,false);o.closePath();o.fill()}else{p=r.wrapper.offsetHeight;o=document.getCSSCanvasContext("2d","scrollbar"+r.uid+r.dir,5,p);o.fillStyle="rgb(0,0,0)";o.beginPath();o.arc(2.5,2.5,2.5,Math.PI,0,false);o.lineTo(5,p-2.5);o.arc(2.5,p-2.5,2.5,0,Math.PI,false);o.closePath();o.fill()}r.maxSize=r.dir=="horizontal"?r.wrapper.clientWidth:r.wrapper.clientHeight;r.size=Math.round(r.maxSize*r.maxSize/q);r.maxScroll=r.maxSize-r.size;r.toWrapperProp=r.maxScroll/(n-q);r.bar.style[r.dir=="horizontal"?"width":"height"]=r.size+"px"},setPosition:function(p,o){var n=this;if(!o&&n.wrapper.style.opacity!="1"){n.show()}p=n.toWrapperProp*p;if(p<0){p=n.shrink?p+p*3:0;if(n.size+p<5){p=-n.size+5}}else{if(p>n.maxScroll){p=n.shrink?p+(p-n.maxScroll)*3:n.maxScroll;if(n.size+n.maxScroll-p<5){p=n.size+n.maxScroll-5}}}p=n.dir=="horizontal"?j+Math.round(p)+"px,0"+b:j+"0,"+Math.round(p)+"px"+b;n.bar.style.webkitTransform=p},show:function(){if(f){this.wrapper.style.webkitTransitionDelay="0"}this.wrapper.style.opacity="1"},hide:function(){if(f){this.wrapper.style.webkitTransitionDelay="200ms"}this.wrapper.style.opacity="0"},remove:function(){this.wrapper.parentNode.removeChild(this.wrapper);return null}};var f=("WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix()),c=(/iphone/gi).test(navigator.appVersion),d=(/ipad/gi).test(navigator.appVersion),i=(/android/gi).test(navigator.appVersion),a=c||d||i,h=a?"touchstart":"mousedown",k=a?"touchmove":"mousemove",g=a?"touchend":"mouseup",j="translate"+(f?"3d(":"("),b=f?",0)":")",e=0;window.iScroll=l})();